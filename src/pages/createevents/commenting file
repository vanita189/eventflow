// import { Stack, Box, Typography, Tabs, Tab, Paper } from "@mui/material";
// import EventIcon from "@mui/icons-material/Event";
// import { useEffect, useState } from "react";
// import EventPackage from "./EventPackage";
// import EventBasicInfo from "./EventBasicInfo";
// import { showSnackbar } from "../../redux/snackbar/snackbarSlice";
// import { useParams } from "react-router-dom";
// import { useDispatch } from "react-redux";
// import { getEventsById, updateEvent } from "../../api/CreateEventPost";
// import dayjs from "dayjs";

// function EditEvent() {
//     const [step, setStep] = useState(0);
//     const [loading, setLoading] = useState(false);
//     const { id } = useParams();
//     const dispatch = useDispatch();
//     const [eventDetails, setEventDetails] = useState({
//         eventName: "",
//         eventImage: null,
//         eventLocation: null,
//         eventStartDate: null,
//         eventEndDate: null,
//         ticketStartDate: null,
//         ticketEndDate: null,
//         eventCapacity: "",
//         eventTags: "",
//         eventDescription: "",
//     });
//     const [packageDetails, setPackageDetails] = useState([]);

//     const isBasicInfoValid = () => {
//         return (
//             eventDetails.eventName &&
//             eventDetails.eventImage &&
//             eventDetails.eventLocation &&
//             eventDetails.eventStartDate &&
//             eventDetails.eventEndDate &&
//             eventDetails.ticketStartDate &&
//             eventDetails.ticketEndDate &&
//             eventDetails.eventCapacity &&
//             eventDetails.eventTags &&
//             eventDetails.eventDescription
//         )
//     }

//     const [errors, setErrors] = useState({});
//     const validateBasicInfo = () => {
//         const newErrors = {}

//         const {
//             eventStartDate,
//             eventEndDate,
//             ticketStartDate,
//             ticketEndDate
//         } = eventDetails

//         if (!eventDetails.eventName) newErrors.eventName = "Event name is required";
//         if (!eventDetails.eventImage)
//             newErrors.eventImage = "Event image is required";

//         if (!eventDetails.eventLocation)
//             newErrors.eventLocation = "Event location is required";

//         if (!eventDetails.eventCapacity)
//             newErrors.eventCapacity = "Event capacity is required";

//         if (!eventDetails.eventTags)
//             newErrors.eventTags = "Event tags are required";

//         if (!eventDetails.eventDescription)
//             newErrors.eventDescription = "Event description is required";

//         //date validations
//         // Event dates
//         if (eventStartDate && eventEndDate && eventEndDate < eventStartDate) {
//             newErrors.eventEndDate = "Event end date must be after start date";
//         }

//         // Ticket vs Event
//         if (ticketStartDate && eventStartDate && ticketStartDate > eventStartDate) {
//             newErrors.ticketStartDate =
//                 "Ticket start date must be before event start date";
//         }

//         if (ticketEndDate && eventEndDate && ticketEndDate > eventEndDate) {
//             newErrors.ticketEndDate =
//                 "Ticket end date must be before or equal to event end date";
//         }

//         // Ticket range
//         if (ticketStartDate && ticketEndDate && ticketEndDate < ticketStartDate) {
//             newErrors.ticketEndDate =
//                 "Ticket end date must be after ticket start date";
//         }

//         setErrors(newErrors);
//         return Object.keys(newErrors).length === 0
//     }

//     const handleTabChange = (event, newValue) => {

//         setStep(newValue);
//     }
   

//     return (
//         <form>
//             <Stack sx={{ display: "flex", alignItems: "center" }}>
//                 <Stack sx={{ maxWidth: { lg: "80%", xs: "100%" }, width: "100%" }}>
//                     <Box display="flex" alignItems="center" gap={1} mb={2} mt={1}>
//                         <EventIcon />
//                         <Typography variant="h6" fontWeight={500} color="#5866f8ff">Edit Event</Typography>
//                     </Box>

//                     <Paper sx={{
//                         p: "16px 32px",
//                         border: "0.5px solid #cfcbcbff"
//                     }}>
//                         <Box sx={{ borderBottom: "1px solid #ccc" }}>
//                             <Tabs variant="fullWidth" value={step} onChange={handleTabChange}>
//                                 <Tab sx={{ fontWeight: 600 }} label="Event Basic Information" />
//                                 <Tab sx={{ fontWeight: 600 }} label="Event Packages Information" />
//                             </Tabs>
//                         </Box>

//                         <Box>
//                             {step === 0 && (
//                                 <EventBasicInfo
//                                     eventDetails={eventDetails}
//                                     setEventDetails={setEventDetails}
//                                     setStep={setStep}
//                                     validateBasicInfo={validateBasicInfo}
//                                     errors={errors}
//                                 />
//                             )}

//                             {step === 1 && (
//                                 <EventPackage
//                                     packageDetails={packageDetails}
//                                     setPackageDetails={setPackageDetails}
//                                     setStep={setStep}
//                                     onSubmit={handleUpdateEvent}

//                                 />
//                             )}
//                         </Box>
//                     </Paper>
//                 </Stack>


//             </Stack>
//         </form>
//     )
// }
// export default EditEvent;







// import {
//   Paper,
//   Stack,
//   Typography,
//   Box,
//   TextField,
//   MenuItem,
//   Divider,
// } from "@mui/material";
// import Editor from "../../components/Editor";
// import { useState } from "react";
// import PrimaryButton from "../../components/PrimaryButton";

// const ENTRY_TYPES = [
//   "Free Entry",
//   "Cover Entry",
//   "Ladies Entry",
//   "Stag Entry",
//   "Couple Entry",
// ];

// const EMPTY_FORM = {
//   id: null,
//   packageName: "",
//   price: "",
//   allowedPersons: "",
//   quantity: "",
//   description: "",
// };

// function EventPackage({ setStep }) {
//   const [draftForm, setDraftForm] = useState(EMPTY_FORM);
//   const [packages, setPackages] = useState([]);
//   const [editingId, setEditingId] = useState(null);

//   const isFreeEntry = draftForm.packageName === "Free Entry";

//   const usedPackageNames = packages.map((pkg) => pkg.packageName);

//   /* Select package (NEW or EDIT if exists) */
//   const handleSelectPackage = (e) => {
//     const selected = e.target.value;

//     const existingPackage = packages.find(
//       (pkg) => pkg.packageName === selected
//     );

//     if (existingPackage) {
//       // Edit existing package
//       setDraftForm(existingPackage);
//       setEditingId(existingPackage.id);
//     } else {
//       // New package
//       setDraftForm({
//         ...EMPTY_FORM,
//         id: crypto.randomUUID(),
//         packageName: selected,
//       });
//       setEditingId(null);
//     }
//   };

//   /* Change fields */
//   const handleChange = (field) => (e) => {
//     setDraftForm({ ...draftForm, [field]: e.target.value });
//   };

//   /* Add / Update package */
//   const handleAddPackage = () => {
//     if (
//       !draftForm.packageName ||
//       !draftForm.allowedPersons ||
//       !draftForm.quantity
//     ) {
//       alert("Please fill required fields");
//       return;
//     }

//     if (editingId) {
//       setPackages((prev) =>
//         prev.map((pkg) =>
//           pkg.id === editingId ? draftForm : pkg
//         )
//       );
//     } else {
//       setPackages((prev) => [draftForm, ...prev]);
//     }

//     setDraftForm(EMPTY_FORM);
//     setEditingId(null);
//   };

//   /* Edit package */
//   const handleEdit = (pkg) => {
//     setDraftForm(pkg);
//     setEditingId(pkg.id);
//   };

//   /* Remove package */
//   const handleRemove = (id) => {
//     setPackages((prev) => prev.filter((pkg) => pkg.id !== id));
//   };

//   /* Submit all packages */
//   const handleSubmitAll = () => {
//     console.log("FINAL PAYLOAD ðŸ‘‰", packages);
//     alert("All packages submitted!");
//   };

//   return (
//     <Stack spacing={4} >
//       {/* HEADER */}
//       <Box>
//         <Typography variant="h6" fontWeight={700}>
//           Add Entry Packages
//         </Typography>
//         <Typography variant="body2" color="text.secondary">
//           Add packages one by one. Each package type can be added only once.
//         </Typography>
//       </Box>

//       {/* PACKAGE SELECT */}
//       <Box>
//         <TextField
//           select
//           fullWidth
//           value={draftForm.packageName}
//           onChange={handleSelectPackage}
//           SelectProps={{ displayEmpty: true }}
//         >
//           <MenuItem value="" disabled>
//             Select an entry package
//           </MenuItem>

//           {ENTRY_TYPES.map((type) => (
//             <MenuItem
//               key={type}
//               value={type}
//               disabled={usedPackageNames.includes(type)}
//             >
//               {type}
//             </MenuItem>
//           ))}
//         </TextField>
//       </Box>

//       {/* FORM */}
//       {draftForm.packageName && (
//         <Paper sx={{ p:3, borderRadius: 2 }}>
//           <Stack spacing={3}>
//             <Typography fontWeight={700}>
//               {editingId ? "Edit Package" : "New Package"} â€“{" "}
//               {draftForm.packageName}
//             </Typography>

//             <TextField
//               label="Price"
//               type="number"
//               disabled={isFreeEntry}
//               value={draftForm.price}
//               onChange={handleChange("price")}
//               placeholder={isFreeEntry ? "Free Entry" : ""}
//             />

//             <Stack direction="row" spacing={2}>
//               <TextField
//                 fullWidth
//                 label="Allowed Persons"
//                 type="number"
//                 value={draftForm.allowedPersons}
//                 onChange={handleChange("allowedPersons")}
//               />
//               <TextField
//                 fullWidth
//                 label="Quantity"
//                 type="number"
//                 value={draftForm.quantity}
//                 onChange={handleChange("quantity")}
//               />
//             </Stack>

//             <Editor
//               value={draftForm.description}
//               onChange={(v) =>
//                 setDraftForm({ ...draftForm, description: v })
//               }
//             />

//             <PrimaryButton onClick={handleAddPackage}>
//               {editingId ? "Update Package" : "Add Package"}
//             </PrimaryButton>
//           </Stack>
//         </Paper>
//       )}

//       {/* ADDED PACKAGES LIST */}
//       {packages.length > 0 && (
//         <Stack spacing={2}>
//           <Typography fontWeight={700}>Added Packages</Typography>

//           {packages.map((pkg) => (
//             <Paper key={pkg.id} sx={{ p: 2 }}>
//               <Stack spacing={1}>
//                 <Typography fontWeight={600}>
//                   {pkg.packageName}
//                 </Typography>

//                 <Typography variant="body2">
//                   Price:{" "}
//                   {pkg.packageName === "Free Entry"
//                     ? "Free"
//                     : `â‚¹${pkg.price}`}
//                 </Typography>

//                 <Typography variant="body2">
//                   Persons: {pkg.allowedPersons} | Qty: {pkg.quantity}
//                 </Typography>

//                 <Stack direction="row" spacing={2}>
//                   <PrimaryButton onClick={() => handleEdit(pkg)}>
//                     Edit
//                   </PrimaryButton>
//                   <PrimaryButton onClick={() => handleRemove(pkg.id)}>
//                     Remove
//                   </PrimaryButton>
//                 </Stack>
//               </Stack>
//             </Paper>
//           ))}
//         </Stack>
//       )}

//       <Divider />

//       {/* FOOTER */}
//       <Stack direction="row" justifyContent="space-between">
//         <PrimaryButton onClick={() => setStep(0)}>
//           Previous
//         </PrimaryButton>

//         <PrimaryButton
//           disabled={packages.length === 0}
//           onClick={handleSubmitAll}
//         >
//           Submit Event
//         </PrimaryButton>
//       </Stack>
//     </Stack>
//   );
// }

// export default EventPackage;



// https://695bbf8a1d8041d5eeb83e9b.mockapi.io/api/v1/:endpoint




// import {
//   Paper,
//   Stack,
//   Typography,
//   Box,
//   TextField,
//   MenuItem,
//   Divider,
// } from "@mui/material";
// import Editor from "../../components/Editor";
// import { useState } from "react";
// import PrimaryButton from "../../components/PrimaryButton";

// const ENTRY_TYPES = [
//   "Free Entry",
//   "Cover Entry",
//   "Ladies Entry",
//   "Stag Entry",
//   "Couple Entry",
// ];

// const EMPTY_FORM = {
//   id: null,
//   packageName: "",
//   price: "",
//   allowedPersons: "",
//   quantity: "",
//   description: "",
// };

// function EventPackage({
//   packageDetails,
//   setPackageDetails,
//   setStep,
//   onSubmit,
// }) {
//   const [draftForm, setDraftForm] = useState(EMPTY_FORM);
//   const [editingId, setEditingId] = useState(null);

//   const isFreeEntry = draftForm.packageName === "Free Entry";

//   const usedPackageNames = packageDetails.map(
//     (pkg) => pkg.packageName
//   );

//   /* Select package (NEW or EDIT if exists) */
//   const handleSelectPackage = (e) => {
//     const selected = e.target.value;

//     const existingPackage = packageDetails.find(
//       (pkg) => pkg.packageName === selected
//     );

//     if (existingPackage) {
//       setDraftForm(existingPackage);
//       setEditingId(existingPackage.id);
//     } else {
//       setDraftForm({
//         ...EMPTY_FORM,
//         id: crypto.randomUUID(),
//         packageName: selected,
//       });
//       setEditingId(null);
//     }
//   };

//   /* Change fields */
//   const handleChange = (field) => (e) => {
//     setDraftForm({ ...draftForm, [field]: e.target.value });
//   };

//   /* Add / Update package */
//   const handleAddPackage = () => {
//     if (
//       !draftForm.packageName ||
//       !draftForm.allowedPersons ||
//       !draftForm.quantity
//     ) {
//       alert("Please fill required fields");
//       return;
//     }

//     if (editingId) {
//       setPackageDetails((prev) =>
//         prev.map((pkg) =>
//           pkg.id === editingId ? draftForm : pkg
//         )
//       );
//     } else {
//       setPackageDetails((prev) => [
//         draftForm,
//         ...prev,
//       ]);
//     }

//     setDraftForm(EMPTY_FORM);
//     setEditingId(null);
//   };

//   /* Edit package */
//   const handleEdit = (pkg) => {
//     setDraftForm(pkg);
//     setEditingId(pkg.id);
//   };

//   /* Remove package */
//   const handleRemove = (id) => {
//     setPackageDetails((prev) =>
//       prev.filter((pkg) => pkg.id !== id)
//     );
//   };

//   return (
//     <Stack spacing={4}>
//       {/* HEADER */}
//       <Box>
//         <Typography variant="h6" fontWeight={700}>
//           Add Entry Packages
//         </Typography>
//         <Typography variant="body2" color="text.secondary">
//           Add packages one by one. Each package type can be added only once.
//         </Typography>
//       </Box>

//       {/* PACKAGE SELECT */}
//       <Box>
//         <TextField
//           select
//           fullWidth
//           value={draftForm.packageName}
//           onChange={handleSelectPackage}
//           SelectProps={{ displayEmpty: true }}
//         >
//           <MenuItem value="" disabled>
//             Select an entry package
//           </MenuItem>

//           {ENTRY_TYPES.map((type) => (
//             <MenuItem
//               key={type}
//               value={type}
//               disabled={usedPackageNames.includes(type)}
//             >
//               {type}
//             </MenuItem>
//           ))}
//         </TextField>
//       </Box>

//       {/* FORM */}
//       {draftForm.packageName && (
//         <Paper sx={{ p: 3, borderRadius: 2 }}>
//           <Stack spacing={3}>
//             <Typography fontWeight={700}>
//               {editingId ? "Edit Package" : "New Package"} â€“{" "}
//               {draftForm.packageName}
//             </Typography>

//             <TextField
//               label="Price"
//               type="number"
//               disabled={isFreeEntry}
//               value={draftForm.price}
//               onChange={handleChange("price")}
//               placeholder={isFreeEntry ? "Free Entry" : ""}
//             />

//             <Stack direction="row" spacing={2}>
//               <TextField
//                 fullWidth
//                 label="Allowed Persons"
//                 type="number"
//                 value={draftForm.allowedPersons}
//                 onChange={handleChange("allowedPersons")}
//               />
//               <TextField
//                 fullWidth
//                 label="Quantity"
//                 type="number"
//                 value={draftForm.quantity}
//                 onChange={handleChange("quantity")}
//               />
//             </Stack>

//             <Editor
//               value={draftForm.description}
//               onChange={(v) =>
//                 setDraftForm({
//                   ...draftForm,
//                   description: v,
//                 })
//               }
//             />

//             <PrimaryButton onClick={handleAddPackage}>
//               {editingId ? "Update Package" : "Add Package"}
//             </PrimaryButton>
//           </Stack>
//         </Paper>
//       )}

//       {/* ADDED PACKAGES LIST */}
//       {packageDetails.length > 0 && (
//         <Stack spacing={2}>
//           <Typography fontWeight={700}>
//             Added Packages
//           </Typography>

//           {packageDetails.map((pkg) => (
//             <Paper key={pkg.id} sx={{ p: 2 }}>
//               <Stack spacing={1}>
//                 <Typography fontWeight={600}>
//                   {pkg.packageName}
//                 </Typography>

//                 <Typography variant="body2">
//                   Price:{" "}
//                   {pkg.packageName === "Free Entry"
//                     ? "Free"
//                     : `â‚¹${pkg.price}`}
//                 </Typography>

//                 <Typography variant="body2">
//                   Persons: {pkg.allowedPersons} | Qty:{" "}
//                   {pkg.quantity}
//                 </Typography>

//                 <Stack direction="row" spacing={2}>
//                   <PrimaryButton
//                     onClick={() => handleEdit(pkg)}
//                   >
//                     Edit
//                   </PrimaryButton>
//                   <PrimaryButton
//                     onClick={() => handleRemove(pkg.id)}
//                   >
//                     Remove
//                   </PrimaryButton>
//                 </Stack>
//               </Stack>
//             </Paper>
//           ))}
//         </Stack>
//       )}

//       <Divider />

//       {/* FOOTER */}
//       <Stack direction="row" justifyContent="space-between">
//         <PrimaryButton onClick={() => setStep(0)}>
//           Previous
//         </PrimaryButton>

//         <PrimaryButton
//           disabled={packageDetails.length === 0}
//           onClick={onSubmit}
//         >
//           Submit Event
//         </PrimaryButton>
//       </Stack>
//     </Stack>
//   );
// }

// export default EventPackage;